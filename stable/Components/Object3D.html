<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Object3D · Modia3D</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../index.html">Modia3D</a></span></div><form class="docs-search" action="../search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Home</a></li><li><span class="tocitem">Tutorial</span><ul><li><a class="tocitem" href="../tutorial/Tutorial.html">Modia3D Tutorial</a></li><li><a class="tocitem" href="../tutorial/GettingStarted.html">Getting Started</a></li><li><a class="tocitem" href="../tutorial/HierarchicalModels.html">Hierarchical models</a></li><li><a class="tocitem" href="../tutorial/RecursiveModels.html">Recursive models</a></li><li><a class="tocitem" href="../tutorial/CollisionHandling.html">Collision Handling</a></li><li><a class="tocitem" href="../tutorial/SegmentedSimulation.html">Segmented Simulation</a></li></ul></li><li><span class="tocitem">Components</span><ul><li class="is-active"><a class="tocitem" href="Object3D.html">Object3D</a><ul class="internal"><li><a class="tocitem" href="#Scene"><span>Scene</span></a></li><li><a class="tocitem" href="#Solid"><span>Solid</span></a></li><li><a class="tocitem" href="#Visual"><span>Visual</span></a></li></ul></li><li><a class="tocitem" href="Shapes.html">Shapes</a></li><li><a class="tocitem" href="Joints.html">Joints</a></li><li><a class="tocitem" href="Materials.html">Materials</a></li><li><a class="tocitem" href="GravityField.html">Gravity Field</a></li><li><a class="tocitem" href="ForceElements.html">Force Elements</a></li></ul></li><li><a class="tocitem" href="../Functions.html">Functions</a></li><li><span class="tocitem">Internal</span><ul><li><a class="tocitem" href="../internal/Profiling.html">Profiling</a></li><li><a class="tocitem" href="../internal/DynamicDispatch.html">Dynamic Dispatch</a></li><li><a class="tocitem" href="../internal/ContactDetection.html">Contact Detection</a></li><li><a class="tocitem" href="../internal/ContactForceLaw.html">Contact Force Law</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Components</a></li><li class="is-active"><a href="Object3D.html">Object3D</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="Object3D.html">Object3D</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/ModiaSim/Modia3D.jl/blob/main/docs/src/Components/Object3D.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Object3D"><a class="docs-heading-anchor" href="#Object3D">Object3D</a><a id="Object3D-1"></a><a class="docs-heading-anchor-permalink" href="#Object3D" title="Permalink"></a></h1><p>An <a href="Object3D.html#Object3D">Object3D</a> constructor is the core element of Modia3D. It defines a coordinate system moving in 3D together with associated features like <a href="Object3D.html#Scene">Scene</a>, <a href="Object3D.html#Visual">Visual</a> and <a href="Object3D.html#Solid">Solid</a>:</p><p><img src="../../resources/images/object3d.png" alt="Object3D"/></p><article class="docstring"><header><a class="docstring-binding" id="Modia3D.Composition.Object3D" href="#Modia3D.Composition.Object3D"><code>Modia3D.Composition.Object3D</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Object3D(;
    parent          = nothing,
    fixedToParent   = true,
    translation     = [0.0, 0.0, 0.0],
    rotation        = [0.0, 0.0, 0.0],
    velocity        = [0.0, 0.0, 0.0],
    angularVelocity = [0.0, 0.0, 0.0],
    feature         = nothing)</code></pre><p>Generate a new Object3D object, that is a coordinate system with associated feature that is described relatively to its (optional) parent Object3D.</p><p>Vectors <code>translation</code>, <code>rotation</code>, <code>velocity</code>, <code>angularVelocity</code> can be defined with units from package <a href="https://github.com/PainterQubits/Unitful.jl">Unitful</a>. If no units are provided, SI units are assumed (internally, all computations are performed with SI units, that is in m, rad, m/s, rad/s).</p><p><strong>Arguments</strong></p><ul><li><p><code>parent</code>: Parent Object3D. If <code>parent</code> is present, the Object3D is defined relatively to <code>parent</code>. If <code>parent=nothing</code>, the Object3D is either the inertial system (typically called <code>world</code>), or the object is the reference system of a sub-system (via joints, all sub-systems must be connected directly or indirectly to <code>world</code>). Arguments <code>translation</code>, <code>rotation</code>, <code>velocity</code>, <code>angularVelocity</code> are ignored in this case (a warning is printed, if these arguments do not have zero values).</p></li><li><p><code>fixedToParent</code>: = true, if Object3D is fixed relatively to <code>parent</code>. Otherwise, Object3D can move freely relatively to parent (<code>translation</code>, <code>rotation</code>, <code>velocity</code>, <code>angularVelocity</code> is the initial state of Object3D with respect to <code>parent</code>). If <code>parent=nothing</code>, then <code>fixedToParent</code> is ignored.</p></li><li><p><code>translation</code>: Vector from the origin of the parent to the origin of the Object3D, resolved in the parent coordinate system. <br/>Example: <code>translation = [0.0, 0.5, 0.0]</code> or <code>translation = [0.0, 50.0, 0.0]u&quot;cm&quot;</code> are a relative translation of 0.5 m in y-direction of the parent.</p></li><li><p><code>rotation</code>: Vector <code>[angleX, angleY, angleZ]</code> to rotate the parent coordinate system along the x-axis with <code>angleX</code>, the y-axis with <code>angleY</code> and the z-axis with <code>angleZ</code> to arrive at the Object3D coordinate system.<br/>Example: <code>rotation = [0.0, pi/2, 0.0]</code> or <code>rotation = [0.0, 90u&quot;°&quot;, 0.0]</code> defines that a rotation around the y-axis of the parent coordinate system with 90 degrees arrives at the Object3D.</p></li><li><p><code>velocity</code>: If <code>parent</code> is defined and <code>fixedToParent=false</code>, the initial velocity of the origin of the Object3D with respect to the <code>parent</code>, resolved in the parent coordinate system.<br/>Example: <code>velocity = [0.0, 0.5, 0.0]</code> or <code>velocity = [0.0, 50.0, 0.0]u&quot;cm/s&quot;</code> is an initial relative velocity of 0.5 m/s in y-direction of the parent.</p></li><li><p><code>angularVelocity</code>: If <code>parent</code> is defined and <code>fixedToParent=false</code>, the initial angular velocity of the Object3D with respect to the <code>parent</code>, resolved in the parent coordinate system.<br/>Example: <code>angularVelocity = [0.0, pi/2, 0.0]</code> or <code>angularVelocity = [0.0, 90u&quot;°/s&quot;, 0.0]</code> is an initial relative angular velocity of 90 degrees per second in y-direction of the parent.</p></li><li><p><code>feature</code>: Defines the (optional) property associated with the Object3D by a constructor call. Supported constructors:</p><ul><li><code>Scene</code>: A <a href="Object3D.html#Scene">Scene</a> feature marks the root Object3D (world, origin, inertial system). It has no parent Object3D and allows to define global properties, such as the gravity field.</li><li><code>Visual</code>: A <a href="Object3D.html#Visual">Visual</a> feature defines a shape used for visualization.</li><li><code>Solid</code>: A <a href="Object3D.html#Solid">Solid</a> feature defines the solid properties of an Object3D, like mass, inertia tensor, collision behavior.</li><li><code>nothing</code>: No feature is associated with the Object3D. This might be useful for helper Object3Ds, for example to mark a point on a shape and connecting it later via a joint.</li></ul></li></ul><p><strong>States, if freely moving</strong></p><p>If <code>fixedToParent=false</code>, the Object3D is moving freely relatively to <code>parent</code>. Vectors <code>translation</code>, <code>rotation</code>, <code>velocity</code>, <code>angularVelocity</code> (all resolved in <code>parent</code>) are used as states and are available in the result for plotting.</p><p>If <code>rotation[2]</code> is close to its singular position (= 90u&quot;°&quot; or -90u&quot;°&quot;), an event is triggered and the rotation sequence is changed from <code>[angleX, angleY, angleZ]</code> to <code>[angleX, angleZ, angleY]</code>. In the new rotation sequence, <code>rotation[2]</code> is far from its singular position at this time instant. Variable <code>rotationXYZ::Bool</code> in the result signals whether <code>rotation</code> is defined with rotation sequence <code>[angleX, angleY, angleZ]</code> (<code>rotationXYZ=true</code>) or with rotation sequence <code>[angleX, angleZ, angleY]</code> (<code>rotationXYZ=false</code>). See, example <code>Modia3D/test/Basic/ShaftFreeMotionAdaptiveRotSequence.jl</code>. The initial conditions (so <code>rotation=...</code> as key/value pair in the Object3D constructor) are always with <code>rotationXYZ=true</code>. With respect to an approach where the rotation is described with <em>quaternions</em>, the adaptive rotation sequence handling has the benefit that all integrators can be used (a quaternion description works with an overdetermined set of states and therefore standard integrators with step size control need non-trivial code changes).</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">using Modia3D

model = Model3D(
    world      = Object3D(feature = Scene()),
    worldFrame = Object3D(parent  = :world,
                          feature = Visual(shape=CoordinateSystem())),
    support    = Object3D(parent  = :world, translation = [0.0, 0.5, 0.0],
                          feature = Visual(shape = Sphere(diameter=0.1)))
)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ModiaSim/Modia3D.jl/blob/c2b2df8d66329e232b0d138a1dacdc2789b0b609/src/Composition/object3D.jl#L50-L118">source</a></section></article><p>A feature defines a property that is associated with an <a href="Object3D.html#Object3D">Object3D</a>. Currently, the following <code>feature</code>s are supported:</p><h2 id="Scene"><a class="docs-heading-anchor" href="#Scene">Scene</a><a id="Scene-1"></a><a class="docs-heading-anchor-permalink" href="#Scene" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Modia3D.Composition.Scene" href="#Modia3D.Composition.Scene"><code>Modia3D.Composition.Scene</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Scene(; kwargs...)</code></pre><p>Defines global properties of the system, such as the gravity field. Exactly one <a href="Object3D.html#Object3D">Object3D</a> must have a <code>Scene</code> feature defined. This Object3D is used as root Object3D (world, origin, inertial system) and is not allowed to have a parent Object3D.</p><table><tr><th style="text-align: left">Keyword arguments</th><th style="text-align: left">defaults</th></tr><tr><td style="text-align: left"><code>gravityField</code></td><td style="text-align: left">UniformGravity(g=9.81, n=[0,-1,0])</td></tr><tr><td style="text-align: left"><code>enableVisualization</code></td><td style="text-align: left">true</td></tr><tr><td style="text-align: left"><code>animationFile</code></td><td style="text-align: left">nothing</td></tr><tr><td style="text-align: left"><code>provideAnimationHistory</code></td><td style="text-align: left">false</td></tr><tr><td style="text-align: left"><code>enableContactDetection</code></td><td style="text-align: left">true</td></tr><tr><td style="text-align: left"><code>elasticContactReductionFactor</code></td><td style="text-align: left">1.0  (&gt; 0.0, &lt;= 1.0)</td></tr><tr><td style="text-align: left"><code>maximumContactDamping</code></td><td style="text-align: left">2000.0</td></tr><tr><td style="text-align: left"><code>mprTolerance</code></td><td style="text-align: left">1.0e-20</td></tr><tr><td style="text-align: left"><code>mprIterMax</code></td><td style="text-align: left">120</td></tr><tr><td style="text-align: left"><code>visualizeFrames</code></td><td style="text-align: left">false</td></tr><tr><td style="text-align: left"><code>visualizeBoundingBox</code></td><td style="text-align: left">false</td></tr><tr><td style="text-align: left"><code>visualizeContactPoints</code></td><td style="text-align: left">false</td></tr><tr><td style="text-align: left"><code>visualizeSupportPoints</code></td><td style="text-align: left">false</td></tr><tr><td style="text-align: left"><code>nominalLength</code></td><td style="text-align: left">1.0</td></tr><tr><td style="text-align: left"><code>defaultFrameLength</code></td><td style="text-align: left">0.2*<code>nominalLength</code></td></tr><tr><td style="text-align: left"><code>nVisualContSupPoints</code></td><td style="text-align: left">5</td></tr><tr><td style="text-align: left"><code>defaultContactSphereDiameter</code></td><td style="text-align: left">0.1</td></tr><tr><td style="text-align: left"><code>cameraDistance</code></td><td style="text-align: left">10.0*<code>nominalLength</code></td></tr><tr><td style="text-align: left"><code>cameraLongitude</code></td><td style="text-align: left">30/180*pi</td></tr><tr><td style="text-align: left"><code>cameraLatitude</code></td><td style="text-align: left">15/180*pi</td></tr><tr><td style="text-align: left"><code>lightDistance</code></td><td style="text-align: left">10.0*<code>nominalLength</code></td></tr><tr><td style="text-align: left"><code>lightLongitude</code></td><td style="text-align: left">60/180*pi</td></tr><tr><td style="text-align: left"><code>lightLatitude</code></td><td style="text-align: left">45/180*pi</td></tr><tr><td style="text-align: left"><code>useOptimizedStructure</code></td><td style="text-align: left">true</td></tr></table><p><strong>Arguments</strong></p><ul><li><p><code>gravityField::Modia3D.AbstractGravityField</code>: Gravity field of the scene. Supported values:</p><ul><li><a href="GravityField.html#Modia3D.Composition.NoGravityField"><code>NoGravityField</code></a>,</li><li><a href="GravityField.html#Modia3D.Composition.UniformGravityField"><code>UniformGravityField</code></a>,</li><li><a href="GravityField.html#Modia3D.Composition.PointGravityField"><code>PointGravityField</code></a></li></ul></li><li><p><code>enableVisualization::Bool</code>: = true, to enable online animation with DLR SimVis. If SimVis is not installed, this flag has no effect.</p></li><li><p><code>animationFile::String</code>: After termination of the simulation, store animation in json-file that can be imported into the open source 3D editor <a href="https://threejs.org/">threejs.org</a>. Example: <code>animationFile = &quot;animation.json&quot;</code>.</p></li><li><p><code>enableContactDetection::Bool</code>: = true, if contact detection is enabled, see <a href="../tutorial/CollisionHandling.html#Collision-Handling">Collision Handling</a>.</p></li><li><p><code>elasticContactReductionFactor::Float64</code> (&gt; 0.0, &lt;= 1.0): <code>usedContactCompliance = contactCompliance * elasticContactReductionFactor</code>. For more details, see <a href="../internal/ContactForceLaw.html#Material-constants">Material constants</a>.</p></li><li><p><code>maximumContactDamping</code> (&gt; 0.0): Maximum damping factor for elastic contacts. For more details, see <a href="../internal/ContactForceLaw.html#Damping-coefficient">Damping coefficient</a>.</p></li><li><p><code>mprTolerance::1.0e-20</code>: Local tolerance used for terminating the mpr algorithm (that computes the distances between shapes). Changing this value might improve speed. For integrators with step-size control, a value is needed that is much smaller as the relative tolerance used for the integration.</p></li><li><p><code>mprIterMax::120</code>: Local maximum amount of iterations used for mpr algorithm.  If more iterations are needed a message is printed.</p></li><li><p><code>visualizeFrames::Bool</code>: = true, to visualize the coordinate system of every <a href="Object3D.html#Object3D">Object3D</a> that is not explicitly switched off.</p></li><li><p><code>visualizeBoundingBox::Bool</code>: Flag enabled for visualizing Axis Aligned Bounding Box (AABB) for all solid shapes allowed to collide</p></li><li><p><code>visualizeContactPoints::Bool</code>: Flag enabled for visualizing contact points, and <code>enableVisualization = true</code></p></li><li><p><code>visualizeSupportPoints::Bool</code>: Flag enabled for visualizing support points, and <code>enableVisualization = true</code></p></li><li><p><code>nominalLength::Float64</code>: Nominal length in [m].</p></li><li><p><code>defaultFrameLength::Float64</code>: Default frame length in [m] for visualizing little <a href="Shapes.html#CoordinateSystem">CoordinateSystem</a>.</p></li><li><p><code>nVisualContSupPoints::Int64</code>: Defines how many contact as well as support points are visualized (there is a warning if you&#39;ll need to increase it)</p></li><li><p><code>defaultContactSphereDiameter::Float64</code>: Diameter of <a href="Shapes.html#Sphere">Sphere</a> in [m] used for contact and support point visualization</p></li><li><p><code>cameraDistance::Float64</code>: Distance between world frame and camera position (animation export only)</p></li><li><p><code>cameraLongitude::Float64</code>: Longitude angle of camera position (0 = -y/-z/-x direction) (animation export only)</p></li><li><p><code>cameraLatitude::Float64</code>: Latitude angle of camera position (0 = horizontal) (animation export only)</p></li><li><p><code>lightDistance::Float64</code>: Distance between world frame and light position (animation export only)</p></li><li><p><code>lightLongitude::Float64</code>: Longitude angle of light position (0 = -y/-z/-x direction) (animation export only)</p></li><li><p><code>lightLatitude::Float64</code>: Latitude angle of light position (0 = horizontal) (animation export only)</p></li><li><p><code>useOptimizedStructure::Bool</code>: = true, if pre-processing the whole system. For example, computing the common mass, common center of mass and common inertia tensor of all rigidly connected Object3Ds that have mass properties.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ModiaSim/Modia3D.jl/blob/c2b2df8d66329e232b0d138a1dacdc2789b0b609/src/Composition/scene.jl#L300-L389">source</a></section></article><h2 id="Solid"><a class="docs-heading-anchor" href="#Solid">Solid</a><a id="Solid-1"></a><a class="docs-heading-anchor-permalink" href="#Solid" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Modia3D.Shapes.Solid" href="#Modia3D.Shapes.Solid"><code>Modia3D.Shapes.Solid</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Solid(; shape           = nothing,
        solidMaterial   = nothing,
        massProperties  = nothing,
        visualMaterial  = VisualMaterial(),
        collision       = false,
        contactMaterial = &quot;&quot;,
        collisionSmoothingRadius = 0.001,
        contactSphereRadius      = nothing)</code></pre><p>Generate a <a href="Object3D.html#Solid">Solid</a> with physical behavior of a rigid body with mass, visualization and collision properties. <code>Solid</code> is used as <code>feature</code> of an <a href="Object3D.html#Object3D">Object3D</a>.</p><p><strong>Arguments</strong></p><ul><li><p><code>shape</code>: Defines the shape of the solid. Only <a href="Shapes.html#Shapes">Shapes</a> from <a href="Shapes.html#––-For-Solid-and-Visual-––">–– For Solid and Visual ––</a> can be used.   If undefined the solid is not considered in visualization or <a href="../tutorial/CollisionHandling.html#Collision-Handling">Collision Handling</a> and <code>massProperties</code> must   be explicitly defined.</p></li><li><p><code>solidMaterial</code>: Defines the material of the solid used for mass properties computation and (if <code>contactMaterial</code> is   undefined) contact force calculation. A pre-defined <a href="Materials.html#Solid-material">Solid material</a> from palettes/solidMaterials.json (e.g.   <code>&quot;Steel&quot;</code>) or a user-defined <a href="Materials.html#Solid-material">Solid material</a> (e.g. <code>SolidMaterial(density=7850)</code>) can be used.   <code>solidMaterial = &quot;&quot;</code> is treated as <code>solidMaterial = nothing</code>.</p></li><li><p><code>massProperties</code>: Defines the mass properties of the solid.</p><ul><li><code>massProperties = nothing</code>: The mass properties are computed from <code>shape</code> and <code>solidMaterial</code>. If additionally <code>solidMaterial = nothing</code>, the solid is treated as massless.</li><li><code>massProperties = MassProperties(; mass=0.0, centerOfMass=[0.0,0.0,0.0], Ixx=0.0, Iyy=0.0, Izz=0.0) Ixy=4.5, Ixz=4.6, Iyz=5.5)</code>: Defines all mass properties explicitly <code>MassProperties()</code> defines a massless solid.</li><li><code>massProperties = MassPropertiesFromShapeAndMass(; mass=0.0)</code>: The center of mass and the inertia tensor is computed from <code>shape</code> and from <code>mass</code>.</li></ul></li><li><p><code>visualMaterial</code>: Defines the material of the solid used for visualization. A pre-defined <a href="Materials.html#Visual-material">Visual material</a>   from palettes/visualMaterials.json (e.g. <code>visualMaterial = &quot;RedTransparent&quot;</code>) or a user-defined <a href="Materials.html#Visual-material">Visual material</a> (e.g.   <code>VisualMaterial(color=&quot;DeepSkyBlue4&quot;, transparency=0.75)</code>) can be used.   Note, <code>VisualMaterial = &quot;&quot;</code> is treated as <code>visualMaterial = VisualMaterial()</code>, so using the default visual material.</p></li><li><p><code>collision</code>: Defines if the solid is considered in <a href="../tutorial/CollisionHandling.html#Collision-Handling">Collision Handling</a>. <code>collision=true</code> requires definition   of <code>shape</code> and of contact material (defined by <code>solidMaterial</code> or <code>contactMaterial</code>).</p></li><li><p><code>contactMaterial</code>: Defines the contact material in case of collision. For details, see <a href="../internal/ContactForceLaw.html#Contact-Force-Law">Contact Force Law</a> (e.g. <code>&quot;Steel&quot;</code>).   If undefined <code>solidMaterial</code> is used as contact material. Only contact material combinations defined in   palettes/contactPairMaterials.json can be used.</p></li><li><p><code>collisionSmoothingRadius</code>: Defines a collision smoothing radius for surface edges, its default value is <code>0.001</code> [m]. This improves the robustness of the integration, if contact is on or close to a surface edge. It takes the minimum value of the provided collision smoothing radius and 10% of the smallest shape length, like <code>min(collisionSmoothingRadius, 0.1 min(shape dimensions))</code>. If it is set to <code>0.0</code> no <code>collisionSmoothingRadius</code> is used. A <code>collisionSmoothingRadius</code> is used for <code>Box</code>, <code>Cylinder</code>, <code>Cone</code>, and <code>Beam</code>.</p></li><li><p><code>contactSphereRadius</code>: For each shape a <code>contactSphereRadius</code> is defined, so that a rough approximiation of Hertz&#39; pressure is used in <a href="../internal/ContactForceLaw.html#Response-calculation">Response calculation</a> not only for spheres. You can define your own <code>contactSphereRadius</code>, otherwise it is computed from shape geometry (sketched in the following table).</p></li></ul><table><tr><th style="text-align: left">Shape</th><th style="text-align: left"><code>contactSphereRadius</code> from shape</th></tr><tr><td style="text-align: left"><a href="Shapes.html#Sphere">Sphere</a></td><td style="text-align: left"><code>diameter/2</code></td></tr><tr><td style="text-align: left"><a href="Shapes.html#Ellipsoid">Ellipsoid</a></td><td style="text-align: left"><code>min(lengthX, lengthY, lengthZ)/2</code></td></tr><tr><td style="text-align: left"><a href="Shapes.html#Box">Box</a></td><td style="text-align: left"><code>min(lengthX, lengthY, lengthZ)/2</code></td></tr><tr><td style="text-align: left"><a href="Shapes.html#Cylinder">Cylinder</a></td><td style="text-align: left"><code>min(diameter, length)/2</code></td></tr><tr><td style="text-align: left"><a href="Shapes.html#Cone">Cone</a></td><td style="text-align: left"><code>(diameter + topDiameter)/4</code></td></tr><tr><td style="text-align: left"><a href="Shapes.html#Capsule">Capsule</a></td><td style="text-align: left"><code>diameter/2</code></td></tr><tr><td style="text-align: left"><a href="Shapes.html#Beam">Beam</a></td><td style="text-align: left"><code>min(length, width, thickness)/2</code></td></tr><tr><td style="text-align: left"><a href="Shapes.html#FileMesh">FileMesh</a></td><td style="text-align: left"><code>shortestEdge/2</code></td></tr></table><p>For flat shapes, <a href="Shapes.html#Box">Box</a> and <a href="Shapes.html#Beam">Beam</a>, no <code>contactSphereRadius</code> is taken.  For Herz&#39; pressure it is needed only if two flat shapes are colliding. Note, <code>contactSphereRadius &lt;= 0</code> is treated as <code>contactSphereRadius = nothing</code>, so is computed from the table above.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">using Modia3D

Solid(; shape = Sphere(diameter=0.5),
        solidMaterial = &quot;DryWood&quot;,
        collision = true,
        contactMaterial = &quot;Steel&quot;,
        collisionSmoothingRadius = 0.001,
        visualMaterial = VisualMaterial(color=&quot;DarkViolet&quot;))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ModiaSim/Modia3D.jl/blob/c2b2df8d66329e232b0d138a1dacdc2789b0b609/src/Shapes/solid.jl#L1-L73">source</a></section></article><h3 id="Examples-for-Solids"><a class="docs-heading-anchor" href="#Examples-for-Solids">Examples for Solids</a><a id="Examples-for-Solids-1"></a><a class="docs-heading-anchor-permalink" href="#Examples-for-Solids" title="Permalink"></a></h3><p>How to compute or define mass properties?</p><pre><code class="nohighlight hljs"># [M1]: mass properties are computed via shape geometry and predefined solidMaterial
# with defined density, this is the default setting
Solid(shape = Sphere(diameter=0.5), solidMaterial = &quot;Steel&quot;)

# [M2]: mass properties are computed via shape geometry and a defined mass
Solid(shape = Sphere(diameter=0.5), massProperties = MassPropertiesFromShapeAndMass(mass=4.5))

# [M3]: mass properties are explicitly defined: with mass, center of mass, inertia matrix.
# For this option a shape and solidMaterial are optional.
Solid(massProperties = MassProperties(mass=2.0, centerOfMass=[1,2,3],
      Ixx=3.0, Iyy=4.0, Izz=4.0, Ixy=6.0, Ixz=7.0, Iyz=9.0) )</code></pre><p>How to define <a href="Object3D.html#Solid">Solid</a>s for <a href="../tutorial/CollisionHandling.html#Collision-Handling">Collision Handling</a>? You always have to enable <code>collision</code> flag, and define a <code>shape</code> geometry. Make sure mass properties are computed and define how it behaves in contact situations.</p><pre><code class="nohighlight hljs"># mass properties are computed like in [M1]
# it behaves like &quot;Steel&quot; in contact situations
Solid(shape = Sphere(diameter=0.5), solidMaterial = &quot;Steel&quot;, collision = true)

# mass properties are computed like in [M1]
# it behaves like &quot;DryWood&quot; in contact situations
Solid(shape = Sphere(diameter=0.5), solidMaterial = &quot;Steel&quot;, collision = true,
      contactMaterial = &quot;DryWood&quot;)

# mass properties are computed like in [M2]
# it behaves like &quot;Steel&quot; in contact situations
Solid(shape = Sphere(diameter=0.5),
      massProperties = MassPropertiesFromShapeAndMass(mass=4.5),
      solidMaterial = &quot;Steel&quot;, collision = true)

# mass properties are explicitly given like in [M3]
# it behaves like &quot;Steel&quot; in contact situations
Solid(shape = Sphere(diameter=0.5),
      massProperties = MassProperties(mass=2.0, centerOfMass=[1,2,3],
      Ixx=3.0, Iyy=4.0, Izz=4.0, Ixy=6.0, Ixz=7.0, Iyz=9.0),
      solidMaterial = &quot;Steel&quot;, collision = true)</code></pre><p>The following functions are provided for a <a href="Object3D.html#Solid">Solid</a> shape that is associated with an <code>Object3D</code></p><table><tr><th style="text-align: left">Function</th><th style="text-align: left">Description</th></tr><tr><td style="text-align: left"><code>volume(shape)</code></td><td style="text-align: left">volume computation</td></tr><tr><td style="text-align: left"><code>inertiaMatrix(shape, mass)</code></td><td style="text-align: left">returns inertia matrix of solid with respect to reference Object3D</td></tr><tr><td style="text-align: left"><code>centroid(shape)</code></td><td style="text-align: left">center of mass</td></tr><tr><td style="text-align: left"><code>hasMass(object3D)</code></td><td style="text-align: left">check if a shape has mass properties</td></tr><tr><td style="text-align: left"><code>canCollide(object3D)</code></td><td style="text-align: left">checks if <code>collision</code> flag is enabled</td></tr><tr><td style="text-align: left"><code>boundingBox(shape, &lt;other arguments&gt;)</code></td><td style="text-align: left">bounding box - broad phase of <a href="../tutorial/CollisionHandling.html#Collision-Handling">Collision Handling</a></td></tr><tr><td style="text-align: left"><code>supportPoint(shape, &lt;other arguments&gt;)</code></td><td style="text-align: left">needed for narrow phase of <a href="../tutorial/CollisionHandling.html#Collision-Handling">Collision Handling</a></td></tr><tr><td style="text-align: left">further functions</td><td style="text-align: left">...</td></tr></table><h2 id="Visual"><a class="docs-heading-anchor" href="#Visual">Visual</a><a id="Visual-1"></a><a class="docs-heading-anchor-permalink" href="#Visual" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Modia3D.Shapes.Visual" href="#Modia3D.Shapes.Visual"><code>Modia3D.Shapes.Visual</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Visual(; shape          = nothing,
         visualMaterial = VisualMaterial())</code></pre><p>Generate a new visual shape with a visual material. It is only for visualizing, without physical behavior. The default is no shape and a default visual material.</p><p><strong>Arguments</strong></p><ul><li><code>shape</code>: It is possible to use all <a href="Shapes.html#Shapes">Shapes</a> from both sets visual and solid, e.g. <a href="Shapes.html#Modia3D.Shapes.Sphere"><code>Sphere</code></a>, <a href="Shapes.html#Modia3D.Shapes.Box"><code>Box</code></a>, <a href="Shapes.html#Modia3D.Shapes.CoordinateSystem"><code>CoordinateSystem</code></a>. The default value is <code>nothing</code>, this means it will not be visualized.</li><li><code>visualMaterial</code>: Defines the material of the shape used for visualization. A pre-defined <a href="Materials.html#Visual-material">Visual material</a>   from palettes/visualMaterials.json (e.g. <code>visualMaterial = &quot;RedTransparent&quot;</code>) or a user-defined <a href="Materials.html#Visual-material">Visual material</a> (e.g.   <code>VisualMaterial(color=&quot;DeepSkyBlue4&quot;, transparency=0.75)</code>) can be used.   Note, <code>VisualMaterial = &quot;&quot;</code> is treated as <code>visualMaterial = VisualMaterial()</code>, so using the default visual material.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using Modia3D

shape1 = Visual(shape = Sphere(diameter = 0.5),
                visualMaterial = VisualMaterial(color = &quot;Green&quot;));
shape2 = Visual(shape = Sphere(diameter = 0.5),
                visualMaterial = &quot;GreenTransparent&quot;);</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ModiaSim/Modia3D.jl/blob/c2b2df8d66329e232b0d138a1dacdc2789b0b609/src/Shapes/visual.jl#L6-L29">source</a></section></article><p>An Object3D is visible in visualization and animation export if a <code>shape</code> and a <code>visualMaterial</code> are defined.</p><h3 id="Examples-for-displaying-Solid-and-Visual-features"><a class="docs-heading-anchor" href="#Examples-for-displaying-Solid-and-Visual-features">Examples for displaying Solid and Visual features</a><a id="Examples-for-displaying-Solid-and-Visual-features-1"></a><a class="docs-heading-anchor-permalink" href="#Examples-for-displaying-Solid-and-Visual-features" title="Permalink"></a></h3><p>Visual features</p><pre><code class="nohighlight hljs"># a visual shape is displayed with a user defined visual material
Visual(shape = Sphere(diameter=0.5), visualMaterial = VisualMaterial(color = &quot;goldenrod1&quot;))

# a visual shape is displayed with a default visual material
Visual(shape = Sphere(diameter=0.5))</code></pre><p>Solid features</p><pre><code class="nohighlight hljs"># a solid shape is displayed with a user defined visual material
Solid(shape = Sphere(diameter=0.5), visualMaterial = VisualMaterial(color = &quot;aquamarine4&quot;))

# a solid shape is displayed with a user defined visual material
Solid(shape = Sphere(diameter=0.5))

# this solid shape is NOT displayed
Solid(shape = Sphere(diameter=0.5), visualMaterial = nothing)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../tutorial/SegmentedSimulation.html">« Segmented Simulation</a><a class="docs-footer-nextpage" href="Shapes.html">Shapes »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Monday 5 June 2023 00:45">Monday 5 June 2023</span>. Using Julia version 1.9.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
